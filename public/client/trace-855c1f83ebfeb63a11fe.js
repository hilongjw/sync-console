webpackJsonp([2],{18:function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_IMPORTED_MODULE_0__system__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_1__utils__=__webpack_require__(9),_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),LogManager=function(){function LogManager(t){var e=this;_classCallCheck(this,LogManager),this.options={maxLogCount:t.maxLogCount||50,report:t.report},this.logQueue=[],this.historyQueue=this.load(),this.errorQueue=[],this.logIndex=0,this.system={},__WEBPACK_IMPORTED_MODULE_0__system__.a.info(function(t,o){e.system=o}),this.mock(["log","error","warn"])}return _createClass(LogManager,[{key:"toJSON",value:function(){return"LogManager"}},{key:"errorHandler",value:function(t,e,o){this.report({message:t.message,stack:t.stack,info:o})}},{key:"report",value:function(t){var e=t.message,o=t.stack,n=t.info,r=t.source,a=t.lineNo,i=t.colNo,s={requestId:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils__.b)(),message:e,stack:o,info:n,source:r,lineNo:a,colNo:i,historyQueue:this.historyQueue};console.debug("report to "+this.options.report,s)}},{key:"write",value:function(t,e){var o={id:this.logIndex++,type:t,date:Date.now(),args:e};this.historyQueue.length>this.options.maxLogCount&&this.historyQueue.shift(),this.historyQueue.push(o),this.logQueue.push(o),clearTimeout(this.timer),this.timer=setTimeout(this.save.bind(this),100)}},{key:"save",value:function(){var t=JSON.stringify(this.historyQueue);localStorage.LogManager=t}},{key:"load",value:function(){var t=localStorage.LogManager||"[]",e=[];try{e=JSON.parse(t)}catch(t){console.error(t)}return e}},{key:"evalCommand",value:function evalCommand(code){console.log(code);try{var result=eval(code);console.log(result)}catch(t){console.error(t)}}},{key:"mockConsole",value:function(t){var e=this;t.map(function(t){var o=console[t],n=e;console[t]=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];if(!r||!r.length)return o.apply(console,r);n.write.call(n,t,r),o.apply(console,r)}})}},{key:"mockOnError",value:function(){var t=this;this.windowOnError=window.onerror,window.onerror=function(e,o,n,r,a){var i={message:e,source:o,lineNo:n,colNo:r,error:a,stack:a.error};t.errorQueue.push(i),t.report(i),t.windowOnError.call(window,e,o,n,r,a)}}},{key:"mock",value:function(t){this.mockConsole(t),this.mockOnError()}}]),LogManager}();__webpack_exports__.a=LogManager},19:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=o(18),a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=document.createElement("div");i.id="ddd",i.setAttribute("style","height: 20px; width: 20px; background: red;"),document.body.appendChild(i);var s={el:"#ddd",clickCount:5,maxLogCount:50,report:"http://xxxxx.com/api/report",Vue:null},c=function(){function t(e){n(this,t),this.options=Object.assign({},s,e),this.state={clickCount:0},this.logManager=new r.a({maxLogCount:this.options.maxLogCount,report:this.options.report}),e.Vue&&(e.Vue.config.errorHandler=function(){this.logManager.errorHandler(arguments)}.bind(this)),window.logManager=this.logManager;var o=window.document.body.querySelector(this.options.el);if(!o)return console.error("invalid el selector with LogTracer");o.addEventListener("click",this.clickMark.bind(this)),this.startReset(),this.show()}return a(t,[{key:"startReset",value:function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){t.state.clickCount=0},1e4)}},{key:"clickMark",value:function(){++this.state.clickCount>this.options.clickCount&&(this.show(),this.options.clickCount=0)}},{key:"show",value:function(){clearInterval(this.timer),o.e(0).then(o.bind(null,68)).then(function(t){t.app.show()})}},{key:"hide",value:function(){this.startReset(),app.hide()}}]),t}();e.a=c},67:function(t,e,o){t.exports=o(7)},7:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=o(19),a=new r.a({el:"#ddd",clickCount:5,maxLogCount:50,report:"http://xxxxx.com/api/report",Vue:n.a});e.default=a},8:function(t,e,o){"use strict";var n={info:function(t){var e={UA:navigator.userAgent,system:this.system(),wechat:this.wechat(),network:this.network()};this.performance(e,t)},system:function(){var t=navigator.userAgent,e="Unknown",o=t.match(/(ipod).*\s([\d_]+)/i),n=t.match(/(ipad).*\s([\d_]+)/i),r=t.match(/(iphone)\sos\s([\d_]+)/i),a=t.match(/(android)\s([\d\.]+)/i);return a?e="Android "+a[2]:r?e="iPhone, iOS "+r[2].replace(/_/g,"."):n?e="iPad, iOS "+n[2].replace(/_/g,"."):o&&(e="iPod, iOS "+o[2].replace(/_/g,".")),e},wechat:function(){var t=navigator.userAgent,e=t.match(/MicroMessenger\/([\d\.]+)/i),o="Unknown";return e&&e[1]&&(o=" WeChat "+e[1]),o},protocol:function(){var t="Unknown";return t="https:"===location.protocol?"HTTPS":"http:"===location.protocol?"HTTP":location.protocol.replace(":",""),t},network:function(){var t=navigator.userAgent,e=t.toLowerCase().match(/ nettype\/([^ ]+)/g),o="Unknown";return e&&e[0]&&(e=e[0].split("/"),o=e[1]),o},performance:function(t,e){var o=window.performance||window.msPerformance||window.webkitPerformance;if(!o||!o.timing)return e("unsupport",t);setTimeout(function(){var n=o.timing;n.navigationStart&&(t.navigationStart=n.navigationStart),n.navigationStart&&n.domainLookupStart&&(t.navigation=n.domainLookupStart-n.navigationStart+"ms"),n.domainLookupEnd&&n.domainLookupStart&&(t.dns=n.domainLookupEnd-n.domainLookupStart+"ms"),n.connectEnd&&n.connectStart&&(n.connectEnd&&n.secureConnectionStart?t["tcp (ssl)"]=n.connectEnd-n.connectStart+"ms ("+(n.connectEnd-n.secureConnectionStart)+"ms)":t.tcp=n.connectEnd-n.connectStart+"ms"),n.responseStart&&n.requestStart&&(t.request=n.responseStart-n.requestStart+"ms"),n.responseEnd&&n.responseStart&&(t.response=n.responseEnd-n.responseStart+"ms"),n.domComplete&&n.domLoading&&(n.domContentLoadedEventStart&&n.domLoading?t.domComplete=n.domComplete-n.domLoading+"ms ("+(n.domContentLoadedEventStart-n.domLoading)+"ms)":t.domComplete=n.domComplete-n.domLoading+"ms"),n.loadEventEnd&&n.loadEventStart&&(t.loadEvent=n.loadEventEnd-n.loadEventStart+"ms"),n.navigationStart&&n.loadEventEnd&&(t["total (DOM)"]=n.loadEventEnd-n.navigationStart+"ms ("+(n.domComplete-n.navigationStart)+"ms)"),e(null,t)},1)}};e.a=n},9:function(t,e,o){"use strict";function n(){return Math.random().toString(16).substr(2)+(new Date).getTime().toString(16)}function r(t){return"[object Number]"==Object.prototype.toString.call(t)}function a(t){return"[object String]"==Object.prototype.toString.call(t)}function i(t){return"[object Array]"==Object.prototype.toString.call(t)}function s(t){return"[object Boolean]"==Object.prototype.toString.call(t)}function c(t){return"[object Undefined]"==Object.prototype.toString.call(t)}function u(t){return"[object Null]"==Object.prototype.toString.call(t)}function l(t){return"[object Symbol]"==Object.prototype.toString.call(t)}function p(t){return!("[object Object]"!=Object.prototype.toString.call(t)&&(r(t)||a(t)||s(t)||i(t)||u(t)||d(t)||c(t)||l(t)))}function d(t){return"[object Function]"==Object.prototype.toString.call(t)}function h(t){if(!p(t)&&!i(t))return[];var e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=[];for(var n in t)e.indexOf(n)<0&&o.push(n);return o=o.sort()}e.b=n,e.a=h;"function"==typeof Symbol&&Symbol.iterator}},[67]);